<!DOCTYPE html>
<html>
 <head>
    <meta charset="utf-8" />
    <title>HTML5</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bad+Script&family=Dancing+Script:wght@400..700&family=Pacifico&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Shantell+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">

    <script src="https://carrier.formcarry.com/js/v1.js"></script>
</head>
 <style>
    *{
        
        font-family: Georgia, 'Times New Roman', Times, serif;
    }
    .main-row-col-width{
            width: 80%;
        }
    @media(width<=768px) {
        .main-row-col-hidden{
            display: none !important;
        }
        .main-row-col-width{
            width: 100%;
        }
    }
    a {
        color: white;
        text-decoration: none; /* no underline */
    }
    .main-bg-color{
        background: rgb(82,70,252);
        background: linear-gradient(0deg, rgba(82,70,252,1) 0%, rgba(63,203,251,1) 100%);
    }
    .main-header-font {
        font-family: "Bad Script", cursive;
        font-weight: 400;
        font-style: normal;
        font-size: 2.4vmax;
        @media(width<=768px){
            font-size:21px;
        }
    }
    .main-header-logo{
        height: 80px; 
        @media(width<=768px){
            height: 75px;
            width: 100%;
            
        }
    }
    .main-row-bg-color{
        background-color: #1F91DC;
    }

    .main-nav-navitem-font{
        font-size: 2vmax;
        @media(width<=768px){
            font-size: 15px;
        }
    }
    .main-ul-font{
        font-size: 1.5vmax;
        @media(width<=768px){
            font-size: 15px;
        }
    }
    .main-table-row1{
        width: 33%;
    }
    .main-table-row-button{
        font-size: 1.5vmax;width: 100%;
        @media(width<=768px){
            font-size: 13px;
        }
    }
    .main-table-row2{
        width: 50%;
    }
    .main-form-font{
        font-size: 1.3vmax;
        @media(width<=768px){
            font-size: 15px;
        }
    }
    .main-form-button-font{
        font-size: 1.3vmax;
        @media(width<=768px){
            font-size: 15px;
        }
    }
    .main-response-font{
        font-size: 1.5vmax;
        @media(width<=768px){
            font-size: 15px;
        }
    }
    *{
        font-family: "Shantell Sans", cursive;
        font-optical-sizing: auto;
        font-weight: 400;
        font-style: normal;
        font-variation-settings:
            "BNCE" 0,
            "INFM" 0,
            "SPAC" 0;
        }
    .main-row-cancelbutton-transition{
        transition: visibality 1s,opacity 0.5s linear;;
    }
    .footer-row-col-span-font{
        font-size: 2.5vmax;
        @media(width<=768px){
            font-size: 15px;
        }
    }

    

    select:focus
        {
            outline: none !important;
        }
 </style>
 <body style="height: 100%;">
    <div class="container-fluid p-0 m-0 text-light d-flex flex-column main-bg-color">
        <header class="row rounded-bottom-circle  p-0 m-0 mb-3  main-row-bg-color shadow-lg">
            <div class="col d-flex align-items-center justify-content-start justify-content-md-end  ">
                <div class="mb-3 mt-2 ms-4 m-md-0  rounded-circle overflow-hidden " >
                    <img class="main-header-logo" src="logo.jpg">
                </div>
            </div>
            <div class="col-auto p-0 ps-md-3 pe-md-3 d-flex align-items-center justify-content-center">
                <div class="pb-4 pt-4 me-4 m-md-0">
                    <span class="main-header-font">Морская таверна мурлоков </span>
                </div>
            </div>
            <div class="col d-flex align-items-center justify-content-center main-row-col-hidden" ></div>
        </header>

        <div class="row d-flex m-0 justify-content-md-center">
            <div class="col-auto  main-row-col-width p-0">
                <div class="nav navbar-nav navbar-expand-md p-0 m-0 rounded-bottom-5 main-row-bg-color shadow-lg">
                    <div class="navbar-nav gap-2 d-flex justify-content-between ">
                        <div class="nav-item ms-5 mt-2 mt-md-0 me-4 ms-md-5 me-md-0 " >
                            <a href="" class="main-nav-navitem-font"><span>Моя хибара</span></a>
                        </div>
                        <div class="nav-item ms-5 me-4 me-md-0 ms-md-0">
                            <a href="" class="main-nav-navitem-font"><span>Доска новостей</span></a>
                        </div>
                        <div class="nav-item ms-5 me-4 ms-md-0 me-md-0">
                            <a href="" class="main-nav-navitem-font"><span>Деревни мурлоков</span></a>
                        </div>
                        <div class="nav-item ms-5 mb-2 mb-md-0 me-4 ms-md-0 me-md-5">
                            <a href="" class="main-nav-navitem-font"><span>Розыск</span></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row d-flex  justify-content-md-center m-0 mt-2">
            <div class="col-auto  main-row-col-width p-0">
                <div class="p-0 m-0 main-row-bg-color shadow-lg rounded-5">
                    <div class="d-flex justify-content-start ">
                        <ul class="ms-4 mb-0 main-ul-font">
                            <li class="mt-2 mb-2 ">
                                <a href="https://www.google.com">Ммммрглнуть донат на бусти</a>
                            </li>
                            <li class="mt-2 mb-2 ">
                                <a href="https://www.google.com">Ммммрглнуть донат на patreon</a>
                            </li>
                            <li class="mt-2 mb-2 ">
                                <a href="https://www.google.com">Ммммрглнуть донат</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row d-flex order-3 order-md-1  justify-content-md-center m-0 mt-2 ">
            <div class="col-auto  main-row-col-width p-0">
                <div class="p-0 ps-4 pe-4 rounded-5 main-row-bg-color shadow-lg">
                    <div class="d-grid container-fluid ">
                        <div class="row mt-2 ms-2 me-2">
                            <div class="col d-flex justify-content-center main-table-row1" >
                                <button type="button" class="btn btn-info pb-2 pt-2 mt-2 mb-2 main-table-row-button shadow-sm">Перейти в новости</button>
                            </div>
                            <div class="col d-flex justify-content-center main-table-row1" >
                                <button type="button" class="btn btn-info pb-2 pt-2 mt-2 mb-2 main-table-row-button shadow-sm">Перейти в сообщества</button>
                            </div>
                            <div class="col d-flex justify-content-center main-table-row1" >
                                <button type="button" class="btn btn-info pb-2 pt-2 mt-2 mb-2 main-table-row-button shadow-sm">Перейти в магазин</button>
                            </div>
                        </div>
                        <div class="row mb-2 ms-2 me-2">
                            <div class="col-2 d-flex justify-content-center main-table-row2">
                                <button type="button" class="btn btn-info pb-2 pt-2 mt-2 mb-2 main-table-row-button shadow-sm">Перейти в настройки</button>
                            </div>
                            <div class="col-2 d-flex justify-content-center main-table-row2">
                                <button type="button" class="btn btn-info pb-2 pt-2 mt-2 mb-2 main-table-row-button shadow-sm">Перейти к играм</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row d-flex order-1 order-md-2 justify-content-md-center m-0 mt-2 rounded-5 ">
            <div class="col-auto  main-row-col-width p-0">
                <div class="p-0 m-0 main-row-bg-color shadow-lg rounded-5">
                    <div class="d-flex justify-content-center pt-2 pb-2 pt-md-5 pb-md-5 ">
                            <form class="d-flex flex-column  formcarryForm w-75 justify-content-center" id='myF'>
                                <label class="main-form-font ">Введите свое имя</label>
                                <input class="mb-4 main-form-font rounded-5 ps-3 pe-3 border-0" type="text" name="name" placeholder="Пусто" required>
                                <label class="main-form-font">Введите свою почту</label>
                                <input class="mb-4 main-form-font rounded-5 ps-3 pe-3 border-0" type="email" name="email" required>
                                <label class="main-form-font">Введите дату рождения</label>
                                <input class="mb-4 main-form-font rounded-5 ps-3 pe-3 border-0" type="date" name="date" placeholder="08.12.2019" required>
                                <label class="main-form-font">Расскажите о себе</label>
                                <textarea class="mb-4 main-form-font rounded-5 ps-3 pe-3 pt-2 pb-2 border-0" name="message" placeholder="Ничего"></textarea>
                                <label class="main-form-font">Выберите свой любимый класс</label>
                                <select class="mb-4 main-form-font rounded-5 ps-3 pe-3 border-0" name="favClass" required>
                                    <option value="warrior" class="ps-3 pe-3">Воин</option>
                                    <option value="mage">Маг</option>
                                    <option value="pries">Жрец</option>
                                    <option value="paladin">Паладин</option>
                                    <option value="warlock">Чернокнижник</option>
                                </select>
                                <label class="main-form-font">Выберите ваши черты</label>
                                <div class="w-100 overflow-hidden rounded-5 border-0 ">
                                    <select class="main-form-font ps-3 m-0 border-0 w-100 overflow-y-auto " style="scrollbar-width:thin ;" name="chars" size="5" multiple="multiple">  
                                        <option value="funny" class="border-0"> Веселый </option> 
                                        <option value="curious" class="border-0"> Любознательный </option>  
                                        <option value="agressive"> Агрессивный </option> 
                                        <option value="fishing"> Люблю рыбалку </option>  
                                        <option value="waterwalk"> Люблю ходить под водой </option>  
                                        <option value="building"> Люблю строить </option>    
                                    </select>
                                </div>  
                                <div class="bg-info mt-4 rounded-5 ps-4 pt-3 pb-3">
                                    <label class="main-form-font ">Выберите ваш статус</label>
                                    <div>
                                        <input type="radio" id="ikr" name="MyStatus" value="ikr" checked />
                                        <label class="main-form-font" for="ikr">Икринка</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="sm_murlock" name="MyStatus" value="sm_murlock" />
                                        <label class="main-form-font" for="sm_murlock">Малек</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="murlock" name="MyStatus" value="murlock" />
                                        <label class="main-form-font" for="murlock">Мурлок</label>
                                    </div>
                                </div>
                                <div class="bg-info mt-4 rounded-5 ps-4 pt-3 pb-3">
                                    <label class="main-form-font">Вы согласны на мрррргл?</label>
                                    <div>
                                        <input type="checkbox" id="voice" name="mrgl" required/>
                                        <label class="main-form-font" for="voice">Мрррргл</label>
                                    </div>
                                </div>
                                <div class="text-center m-2 mt-md-5 main-form-font"><button type="submit" id = "sendButton" class="w-50 btn btn-info d-inline-block shadow-lg rounded-5 p-3 p-md-4 main-form-button-font">Отправить</button></div>
                              </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row order-2 order-md-3 d-flex justify-content-md-center m-0 mt-2" >
            <div class="col-auto p-0 main-row-col-width ">
                <div class="main-row-bg-color rounded-5 d-flex justify-content-center">
                    <div class="main-response-font w-75">
                        <div id="resultDiv" class="text-center p-2 mt-4 mb-4 opacity-0 visually-hidden  main-row-cancelbutton-transition d-flex justify-content-center " >
                            <button id="CancelButton" type="button" class="btn btn-info text-center w-100 rounded-5 text-center">Отмена отправки формы</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="row order-4 d-flex justify-content-md-center m-0 mt-2">
            <div class="col p-0">
                <div class=" p-0 m-0">
                    <div class="d-flex justify-content-center ">
                          <span class="footer-row-col-span-font">(C) ООО Мурлоки и Наги</span>  
                    </div>
                </div>
            </div>
        </footer>
    </div>

 </body>
 <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
 <script>
    class MyForm{
        handleCancel(){
            console.log(this.controller)
            this.controller.abort('Пользователь отменил запрос');
            console.log("Aborted")
            this.resultDiv.classList.add('opacity-0')
            setTimeout(()=>this.resultDiv.classList.add('visually-hidden'),500)
            this.resultDiv.classList.remove('opacity-100')
            document.getElementById("sendButton").classList.remove('disabled');
            clearTimeout(this.time)
            this.controller = new AbortController();
        }
        handleSubmit(){
            this.form.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const formData = new FormData(this.form);
                const value = await Object.fromEntries(formData.entries());
                console.log(value)
                document.getElementById("sendButton").classList.add('disabled');;
                if(this.resultDiv.innerHTML)
                    {
                        this.resultDiv.innerHTML='<button id="CancelButton" type="button" class="btn btn-info text-center w-100 rounded-5 text-center">Отмена отправки формы</button>'
                        document.getElementById("CancelButton").addEventListener( "click", (e)=>this.handleCancel(this) )
                    }
                
                this.resultDiv.classList.remove('opacity-0')
                this.resultDiv.classList.add('opacity-100')
                setTimeout(()=>this.resultDiv.classList.remove('visually-hidden'),500)
                
                try {
                    //async f - для тестирования задержки
                    let f = async ()=>{
                    const response = await fetch('https://formcarry.com/s/IAcSi1Vu-cw', 
                        {
                        signal:this.controller.signal,
                        method: 'POST',
                        headers: {'Content-Type': 'application/json', 'Accept': 'application/json'},
                        body: JSON.stringify(value)
                        })
                    let data=''
                    if(response.ok){
                        data = await response.json();
                    }
                    this.resultDiv.innerHTML = data ? ('<div class="bg-info w-75 rounded-5 "><p class="m-0 mt-2 mb-2">'+data.title+'</p><p class="m-0 mt-2 mb-2">'+data.message+'</p><p class="mt-2 mb-2">'+data.status+'</p></div>'): 'Произошла ошибка при отправке формы';
                    
                    document.getElementById("sendButton").classList.remove('disabled');
                }
                    this.time=setTimeout(f,5000)
                } 
                catch (error) {
                    console.error('Ошибка:', error);
                    this.resultDiv.innerHTML = 'Произошла ошибка при отправке формы';
                }
            });
        }
        constructor(formId){
            this.controller = new AbortController();
            this.form=document.getElementById(formId);
            this.resultDiv = document.getElementById('resultDiv');
            document.getElementById("CancelButton").addEventListener( "click", (e)=>this.handleCancel(this) )
        }
    }
    let myform=new MyForm('myF')
    myform.handleSubmit()
 </script>
</html>